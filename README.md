# Проект по загрузке плейлистов с YouTube

Этот проект позволяет загружать плейлисты с YouTube, включая видео и их информацию, с возможностью организации данных и мониторинга прогресса загрузки.

## Требования

- `Node.js` версии 14.x или выше
- `npm` (пакетный менеджер для Node.js)
- `yt-dlp` (инструмент для скачивания видео)
- `FFmpeg` (для работы с видео)
- Прокси-сервер (опционально)

## Установка на Windows

1. Установите Node.js

2. Перейдите на *[официальный сайт Node.js](https://nodejs.org/en)* и скачайте установочный файл для Windows. После скачивания запустите установщик и следуйте инструкциям на экране.

3. Установите зависимости
Откройте командную строку и перейдите в директорию с вашим проектом. Выполните команду для установки всех необходимых зависимостей:
```npm install```

4. Установите `yt-dlp`
Скачайте *[yt-dlp.exe](https://github.com/yt-dlp/yt-dlp/releases)* и поместите его в ту же папку, где находится ваш файл `app.js`.

5. Установите прокси-сервер (если необходимо)
В файле `app.js` используется SOCKS-прокси. Если вы хотите использовать прокси, укажите данные вашего прокси-сервера в строке:
`const proxyUrl = 'socks5://<username>:<password>@<proxy_host>:<proxy_port>';`
Если прокси не требуется, просто оставьте эту строку как есть или удалите.

6. Установите `FFmpeg`
Скачайте архив с *[ffmpeg](https://github.com/BtbN/FFmpeg-Builds/releases)* под названием `ffmpeg-master-latest-win64-lgpl` и распакуйте его.
Затем переместите папку `ffmpeg-master-latest-win64-lgpl` в корневую директорию проекта, рядом с файлом `app.js`

7. Проверьте установку `FFmpeg`, запустив команду: `ffmpeg -version`. Вывод команды должен подтвердить, что `FFmpeg` установлен правильно.

8. Убедитесь, что `yt-dlp.exe` и папка `ffmpeg-master-latest-win64-lgpl` находятся в корне проекта.

9. Запустите скрипт
Для запуска скрипта выполните команду в командной строке: ```node app.js <channelId1> <channelId2> ...```

10. Замените `<channelId1>`, `<channelId2>` и `т. д.` на идентификаторы каналов, плейлисты которых вы хотите скачать.

### Шаги по добавлению пути к FFmpeg: 

Для корректной работы скрипта необходимо добавить путь к `ffmpeg.exe` в переменные окружения Windows.

1. Найдите путь к `ffmpeg.exe`, который находится в папке `ffmpeg-master-latest-win64-lgpl`. Например, это может быть `C:\path\to\your\project\ffmpeg-master-latest-win64-lgpl\bin`.
2. Нажмите `Win + X` и выберите `Система`.
3. Нажмите на `Дополнительные параметры системы`.
4. В окне `Свойства системы` нажмите на кнопку `Переменные среды`.
5. В разделе `Системные переменные` найдите переменную `Path` и выберите её, затем нажмите `Изменить`.
6. В окне `Редактирование переменной среды` нажмите `Создать` и вставьте путь к папке, содержащей `ffmpeg.exe`.
7. Нажмите `OK`, чтобы сохранить изменения, и закройте все окна.
8. Изменения в переменных окружения могут `потребовать перезагрузки терминала` или `компьютера` для вступления в силу.

После этого вы сможете запускать `ffmpeg` из командной строки, не указывая полный путь к исполняемому файлу.

## Установка на Ubuntu

1. Установите `Node.js`
Для установки `Node.js` на `Ubuntu` выполните следующие команды:

```sudo apt update```
```sudo apt install nodejs```
```sudo apt install npm```

2. Установите зависимости
Перейдите в директорию с вашим проектом и выполните команду для установки зависимостей:

```npm install```

3. Установите `yt-dlp`
Скачайте `yt-dlp` с помощью следующей команды:

```sudo apt install yt-dlp```

4. Установите `FFmpeg`
Установите `FFmpeg` через apt:

```sudo apt install ffmpeg```

5. Установите прокси-сервер (если необходимо)
Если вы хотите использовать прокси, настройте его в строке:

`const proxyUrl = 'socks5://<username>:<password>@<proxy_host>:<proxy_port>';`

6. Запустите скрипт
Для запуска скрипта выполните команду:

```node app.js <channelId1> <channelId2> ...```

Замените `<channelId1>`, `<channelId2>` и `т. д.` на идентификаторы каналов, плейлисты которых вы хотите скачать.

## Примечания

- Скрипт автоматически создаст папки для каждого канала и плейлиста и будет скачивать видео в них.

- Загружаемые видео будут сохраняться в форматах, поддерживаемых `yt-dlp`.

- Логи скачивания будут сохраняться в файл `log.txt`.

- История скачанных видео хранится в файле `download_history.json`.

- За один раз скачивается чуть больше 3 гигабайт данных в папку `DownloadedChannels` для всех каналов. Это ограничение можно изменить на любое значение или полностью убрать, в зависимости от ваших нужд.

## Получение ID канала
```https://www.googleapis.com/youtube/v3/search?part=snippet&type=channel&q=kuplinovplay&key=вашКлюч```

### Параметры запроса:
- `part`: Указывает, какая информация будет возвращена. В данном случае мы запрашиваем `snippet`.
- `type`: Указывает тип искомого объекта. Здесь мы ищем каналы, поэтому указываем `channel`.
- `q`: Имя канала, для которого вы хотите получить ID (в данном примере это [kuplinovplay](https://www.youtube.com/@kuplinovplay)).
- `key`: Ваш личный ключ API. Не забудьте заменить `вашКлюч` на свой ключ.

После выполнения запроса вы получите информацию о канале, включая его ID.

## Что такое ключ API?
Ключ API — это уникальный идентификатор, который используется для аутентификации запросов к API YouTube. Он позволяет Google отслеживать использование своего API и предоставляет доступ к функционалу YouTube. Чтобы получить свой ключ API, выполните следующие шаги:

- Перейдите в *[Google Cloud Console](https://console.cloud.google.com/)*.
- Создайте новый проект или выберите существующий.
- В меню слева выберите "APIs & Services" (API и службы) > "Credentials" (Учётные данные).
- Нажмите "Create credentials" (Создать учётные данные) и выберите "API key" (Ключ API).
- Скопируйте созданный ключ и вставьте его в запрос, заменив вашКлюч на ваш личный ключ API.
- После выполнения запроса вы получите информацию о канале, включая его ID.

## Технологии

- Использование `Node.js` и `npm` для управления зависимостями.
- Работа с `API YouTube` для получения данных о канале.
- Загрузка и обработка видео с использованием `yt-dlp` и `FFmpeg`.

## Лицензия 

Этот проект использует:

*[FFmpeg](https://ffmpeg.org/)*, который распространяется под *[GNU Lesser General Public License (LGPL) версии 2.1](https://www.gnu.org/licenses/old-licenses/lgpl-2.1.ru.html)*.
Текст лицензии находится в папке `ffmpeg-master-latest-win64-lgpl`

*[yt-dlp](https://github.com/yt-dlp/yt-dlp)*, который распространяется под лицензией *[Unlicense](https://unlicense.org/)*.
Файл `yt-dlp.exe` находится в корне проекта.